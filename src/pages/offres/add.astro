---
import {addOffre} from '../../backend.mjs';
let message = 'Votre offre a bien été ajoutée';
if (Astro.request.method === "POST") {
    const formData = await Astro.request.formData();
    const response = await addOffre(formData);
    message = response.message;
}
---

<h1 class="text-3xl font-bold text-center text-blue-700 mb-6">Ajouter une offre</h1>

<form action="/offres/add" method="POST" enctype="multipart/form-data"
    class="bg-white p-8 rounded-2xl shadow-2xl max-w-lg mx-auto space-y-6 border border-gray-200">

    <div class="relative">
        <input type="text" name="nomMaison" id="nomMaison" placeholder=" " required
            class="peer w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-transparent" />
        <label for="nomMaison"
            class="absolute left-3 top-3 text-gray-500 peer-placeholder-shown:top-3 peer-placeholder-shown:text-gray-400 peer-placeholder-shown:text-base transition-all duration-200 peer-focus:top-1 peer-focus:text-sm peer-focus:text-blue-500">
            Nom de la maison
        </label>
    </div>
    <div class="relative">
        <input type="number" name="prix" id="prix" placeholder=" "
            class="peer w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-transparent" />
        <label for="prix"
            class="absolute left-3 top-3 text-gray-500 peer-placeholder-shown:top-3 peer-placeholder-shown:text-gray-400 peer-placeholder-shown:text-base transition-all duration-200 peer-focus:top-1 peer-focus:text-sm peer-focus:text-blue-500">
            Prix
        </label>
    </div>
    <div class="relative">
        <input type="number" name="nbSdb" id="nbSdb" placeholder=" "
            class="peer w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-transparent" />
        <label for="nbSdb"
            class="absolute left-3 top-3 text-gray-500 peer-placeholder-shown:top-3 peer-placeholder-shown:text-gray-400 peer-placeholder-shown:text-base transition-all duration-200 peer-focus:top-1 peer-focus:text-sm peer-focus:text-blue-500">
            Nombre de salles de bain
        </label>
    </div>
    <div class="relative">
        <input type="number" name="nbChambres" id="nbChambres" placeholder=" "
            class="peer w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-transparent" />
        <label for="nbChambres"
            class="absolute left-3 top-3 text-gray-500 peer-placeholder-shown:top-3 peer-placeholder-shown:text-gray-400 peer-placeholder-shown:text-base transition-all duration-200 peer-focus:top-1 peer-focus:text-sm peer-focus:text-blue-500">
            Nombre de chambres
        </label>
    </div>
    <div class="relative">
        <input type="number" name="surface" id="surface" placeholder=" "
            class="peer w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-transparent" />
        <label for="surface"
            class="absolute left-3 top-3 text-gray-500 peer-placeholder-shown:top-3 peer-placeholder-shown:text-gray-400 peer-placeholder-shown:text-base transition-all duration-200 peer-focus:top-1 peer-focus:text-sm peer-focus:text-blue-500">
            Superficie
        </label>
    </div>
    <div class="relative border-2 border-dashed border-gray-300 p-6 text-center rounded-lg hover:bg-gray-100 transition">
        <input type="file" name="image" id="image" class="hidden" />
        <label for="image" class="cursor-pointer text-blue-600 font-medium">
            Cliquez pour ajouter une image
        </label>
    </div>
    <button type="submit"
        class="w-full p-3 text-white bg-gradient-to-r from-blue-500 to-blue-700 rounded-lg shadow-md font-semibold hover:from-blue-600 hover:to-blue-800 transition-all transform hover:scale-105">
         Ajouter l'offre !
    </button>
</form>
